<!doctype html>
<html>
<head>
	<title>rectExample</title>
	<meta charset='utf-8' />
	<style>
		body {
			background-color:#005588;
		}
		#c {
			opacity:.8;
		}
		#namber{
			top:50px;
			left:50px;
			position:absolute;
			background-color: rgb(255, 255, 255, 0.6);
			width: 100px;
			height: 30px;
			z-index: 999;
			padding: 10px;
			text-align: center;
			font-family: tahoma;
			font-size: 19pt;
			border-radius: 10px;
			border: 2px solid black;
		}
		canvas {
			position:absolute;
			top:0; left:0;
		}
	</style>
</head>
<body>
	<canvas id="idCanvas"></canvas>
	<canvas id=bgt></canvas>
	<div id="namber">000</div>
	<script>
		
	let w = idCanvas.width = window.innerWidth,
	h = idCanvas.height = window.innerHeight,
	ctx = idCanvas.getContext('2d'),
	x,y,r,g,b,
	xGo,yGo,
	counter=1;
	lot=100;

		function randomR(End){
			return Math.round(Math.random()*End);
		}
		function anim(){
			if (--lot) {
				window.requestAnimationFrame(anim);
				namber.innerHTML = ++counter;
			}
			
			const 
			x = randomR(w),
			y = randomR(h),
			r = randomR(255),
			g = randomR(255),
			b = randomR(255),
			pointX = w/2,
			pointY = h/2;
			
			let
			xGo=1,
			yGo=1,
			xBe=x,
			yBe=y,
			xPoint=1,
			yPoint=1;

			function animGo(){

				if(!((xBe>pointX-20)&&
					 (xBe<pointX+20)&&
					 (yBe>pointY-20)&&
					 (yBe<pointY+20))) window.requestAnimationFrame(animGo)
					else namber.innerHTML = --counter;
     //let  xGo, yGo;

     const step=6,
     stepPoint=0.1;

     xPoint += (xBe<pointX) ? stepPoint: -stepPoint;
     yPoint += (yBe<pointY) ? stepPoint: -stepPoint;

     xGo += Math.random() * step - step/2;
     yGo += Math.random() * step - step/2; 
     ctx.strokeStyle = "rgb("+r+","+g+","+b+")";
     xBe=Math.round(x+xGo+xPoint);
     yBe=Math.round(y+yGo+yPoint);
     ctx.strokeRect(xBe, yBe, 1, 1);
 }
 animGo();
} 

for(let i=1;i; i--){
	anim();
}  



</script>
</body>
</html> 
